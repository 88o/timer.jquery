/*! timer.jquery 0.1.0 2014-07-23*/(function(t){var s=function(s,i){var e={editable:!0};this.options=t.extend(e,i),this.$el=t(s),this.element=s,this.init()};s.prototype.init=function(){this.secsNum=0,this.minsNum=0,this.hrsNum=0,this.secsStr="0 sec",this.minsStr="",this.hrsStr="",this.timerId=null,this.delay=1e3,this.isTimerRunning=!1,void 0!==this.options.seconds&&(this.hrsNum=Math.floor(this.options.seconds/3600),this.minsNum=Math.floor((this.options.seconds-3600*this.hrsNum)/60),this.secsNum=this.options.seconds-3600*this.hrsNum-60*this.minsNum,this.timeToString()),this.elType=this.$el.prop("tagName").toLowerCase(),this.options.editable&&this.initEditable(),this.options.duration&&(this.interval=this.duration=this.options.duration)},s.prototype.start=function(){this.isTimerRunning||(this.updateTimerDisplay(),this.incrementTime(),this.startTimerInterval())},s.prototype.pause=function(){clearInterval(this.timerId),this.isTimerRunning=!1},s.prototype.resume=function(){this.isTimerRunning||this.startTimerInterval()},s.prototype.remove=function(){this.pause(),clearTimeout(this.timeOutId),t.removeData(this.element,"plugin_"+i),t.removeData(this.element,"seconds")},s.prototype.startTimerInterval=function(){var t=this;this.timerId=setInterval(function(){t.incrementTime()},this.delay),this.isTimerRunning=!0},s.prototype.initEditable=function(){var s=this;this.$el.on("focus",function(){s.pause()}),this.$el.on("blur",function(){var i,e;i="input"===s.elType||"textarea"===s.elType?t(this).val().replace(/\s+/,""):t(this).html().replace(/\s+/,"");var n=/\d+sec/,h=/\d+\:\d+min/,m=/\d+\:\d+\:\d+/;i.match(n)?(s.secsNum=parseInt(i.replace(/sec/,""),10)+1,s.secsNum>59&&(s.secsNum=0,s.minsNum++)):i.match(h)?(i=i.replace(/min/,""),e=i.split(":"),s.minsNum=parseInt(e[0],10),s.secsNum=parseInt(e[1],10)+1,s.secsNum>59&&(s.secsNum=0,s.minsNum++),s.minsNum>59&&(s.minsNum=0,s.hrsNum++)):i.match(m)&&(e=i.split(":"),s.hrsNum=parseInt(e[0],10),s.minsNum=parseInt(e[1],10),s.secsNum=parseInt(e[2],10)+1,s.secsNum>59&&(s.secsNum=0,s.minsNum++),s.minsNum>59&&(s.minsNum=0,s.hrsNum++)),s.resume()})},s.prototype.updateTimerDisplay=function(){var t;t=0===this.hrsNum?60>this.secsNum&&0===this.minsNum?this.secsStr+" sec":this.minsStr+":"+this.secsStr+" min":this.hrsStr+":"+this.minsStr+":"+this.secsStr,"input"===this.elType||"textarea"===this.elType?this.$el.val(t):this.$el.html(t),this.$el.data("seconds",this.get_seconds())},s.prototype.timeToString=function(){this.secsStr=(this.minsNum>0||this.hrsNum>0)&&10>this.secsNum?"0"+this.secsNum:this.secsNum,this.minsStr=this.hrsNum>0&&10>this.minsNum?"0"+this.minsNum:this.minsNum,this.hrsStr=this.hrsNum},s.prototype.get_seconds=function(){return 3600*this.hrsNum+60*this.minsNum+this.secsNum},s.prototype.notify=function(){this.options.callback.call(),this.options.repeat?this.duration+=this.interval:(this.duration=null,this.callback=null)},s.prototype.incrementTime=function(){this.timeToString(),this.updateTimerDisplay(),this.secsNum===this.duration&&this.notify(),this.secsNum++,0===this.secsNum%60&&(this.minsNum++,this.secsNum=0),this.minsNum>59&&0===this.minsNum%60&&(this.hrsNum++,this.minsNum=0)};var i="timer";t.fn[i]=function(e){return e=e||"start",this.each(function(){t.data(this,"plugin_"+i)instanceof s||t.data(this,"plugin_"+i,new s(this,e));var n=t.data(this,"plugin_"+i);"string"==typeof e&&"function"==typeof n[e]&&n[e].call(n),"object"==typeof e&&n.start.call(n,e)})}})(jQuery);