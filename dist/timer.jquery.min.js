/*! timer.jquery 0.1.0 2014-02-05*/(function(t){var s=function(s,i){var e={action:"start",editable:!0};this.options=t.extend(e,i),this.$el=t(s),this.secsNum=0,this.minsNum=0,this.hrsNum=0,this.secsStr="0 sec",this.minsStr="",this.hrsStr="",this.timerId=null,this.delay=1e3,this.isTimerRunning=!1,void 0!==this.options.seconds&&(this.hrsNum=Math.floor(this.options.seconds/3600),this.minsNum=Math.floor((this.options.seconds-3600*this.hrsNum)/60),this.secsNum=this.options.seconds-3600*this.hrsNum-60*this.minsNum,this.timeToString())};s.prototype.init=function(){switch(this.elType=this.$el.prop("tagName").toLowerCase(),this.options.editable&&this.initEditable(),this.options.action){case"start":this.isTimerRunning||this.startTimer();break;case"pause":this.pauseTimer();break;case"resume":this.isTimerRunning||this.startTimerInterval();break;case"reset":this.secsNum=0,this.minsNum=0,this.hrsNum=0;break;case"get_seconds":return 3600*this.hrsNum+60*this.minsNum+this.secsNum-1}},s.prototype.pauseTimer=function(){clearInterval(this.timerId),this.isTimerRunning=!1},s.prototype.startTimer=function(){this.updateTimerDisplay(),this.incrementTime(),this.startTimerInterval()},s.prototype.startTimerInterval=function(){var t=this;this.timerId=setInterval(function(){t.incrementTime()},this.delay),this.isTimerRunning=!0},s.prototype.initEditable=function(){var t=this;this.$el.on("focus",function(){t.$el.timer("pause")}),this.$el.on("blur",function(){t.$el.timer("resume")})},s.prototype.updateTimerDisplay=function(){var t;t=0==this.hrsNum?60>this.secsNum&&0==this.minsNum?this.secsStr+" sec":this.minsStr+":"+this.secsStr+" min":this.hrsStr+":"+this.minsStr+":"+this.secsStr,"input"==this.elType||"textarea"==this.elType?this.$el.val(t):this.$el.html(t)},s.prototype.timeToString=function(){this.secsStr=this.minsNum>0&&10>this.secsNum?"0"+this.secsNum:this.secsNum,this.minsStr=this.hrsNum>0&&10>this.minsNum?"0"+this.minsNum:this.minsNum,this.hrsStr=this.hrsNum},s.prototype.incrementTime=function(){this.timeToString(),this.updateTimerDisplay(),this.secsNum++,0==this.secsNum%60&&(this.minsNum++,this.secsNum=0),this.minsNum>59&&0==this.minsNum%60&&(this.hrsNum++,this.minsNum=0)};var i="timer";t.fn[i]=function(t){"string"==typeof t&&(t={action:t}),this.data("plugin_"+i)instanceof s||this.data("plugin_"+i,new s(this,t));var e=this.data("plugin_"+i);return e.options.action=t.action,e.init(),this}})(jQuery);