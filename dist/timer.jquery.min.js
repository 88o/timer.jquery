/*! timer.jquery 0.2.0 2014-12-07*/!function(a){function b(){o=setInterval(d,500),s=!0}function c(){clearInterval(o),s=!1}function d(){r=g()-p,e(),t&&r===t&&(u.callback(),u.repeat&&(t+=u.duration))}function e(){q[v](i(r)),q.data("seconds",r)}function f(){console.log("makeEditable"),q.on("focus",function(){l()}),q.on("blur",function(){var a=q[v]();if(a.indexOf("sec")>0)r=Number(a.replace(/\ssec/g,""));else if(a.indexOf("min")>0){a=a.replace(/\smin/g,"");var b=a.split(":");r=Number(60*b[0])+Number(b[1])}else if(a.match(/\d{1,2}:\d{2}:\d{2}/)){var b=a.split(":");r=Number(3600*b[0])+Number(60*b[1])+Number(b[2])}m()})}function g(){return Math.round((new Date).getTime()/1e3)}function h(a){var b,c=0,d=Math.floor(a/60);return a>=3600&&(c=Math.floor(a/3600)),a>=3600&&(d=Math.floor(a%3600/60)),10>d&&c>0&&(d="0"+d),b=a%60,10>b&&(d>0||c>0)&&(b="0"+b),{hours:c,minutes:d,seconds:b}}function i(a){var b="",c=h(a);return b=c.hours?c.hours+":"+c.minutes+":"+c.seconds:c.minutes?c.minutes+":"+c.seconds+" min":c.seconds+" sec"}function j(a){if(!isNaN(Number(a)))return a;var b=a.match(/\d{1,2}h/),c=a.match(/\d{1,2}m/),d=a.match(/\d{1,2}s/),e=0;return a=a.toLowerCase(),b&&(e+=3600*Number(b[0].replace("h",""))),c&&(e+=60*Number(c[0].replace("m",""))),d&&(e+=Number(d[0].replace("s",""))),e}function k(){s||(p=g(),e(),b())}function l(){s&&c()}function m(){console.log("resumeTimer",r),s||(p=g()-r,b())}function n(){c(),q.data("plugin_"+x,null),q.data("seconds",null),q[v]("")}var o,p,q,r=0,s=!1,t=null,u={seconds:0,editable:!1,restart:!1,duration:null,callback:function(){alert("Time up!"),c()},repeat:!1},v="html",w=function(b,c){var d;u=a.extend(u,c),q=a(b),r=u.seconds,q.data("seconds",r),d=q.prop("tagName").toLowerCase(),("input"===d||"textarea"===d)&&(v="val"),u.duration&&(t=u.duration=j(u.duration)),u.editable&&f()};w.prototype={start:function(){k()},pause:function(){l()},resume:function(){m()},remove:function(){n()}};var x="timer";a.fn[x]=function(b){return b=b||"start",this.each(function(){a.data(this,"plugin_"+x)instanceof w||a.data(this,"plugin_"+x,new w(this,b));var c=a.data(this,"plugin_"+x);"string"==typeof b&&"function"==typeof c[b]&&c[b].call(c),"object"==typeof b&&c.start.call(c,b)})}}(jQuery);